@model Eticaret.Models.UserRol

@{
	ViewData["Title"] = "KullaniciRolAta";
	Layout = "_LayoutAdmin";
}

<script src="~/js/jquery3.7.1.js"></script>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				...
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary">Save changes</button>
			</div>
		</div>
	</div>
</div>


<div class="col-md-10">

	<h1>Kullanıcıya Rol Ata</h1>

	<hr />
	<div>
		<div class="col-md-4">
			<form asp-action="KullaniciRolAta">
				<div asp-validation-summary="ModelOnly" class="text-danger"></div>
				<div class="form-group">
					<label>Kullanıcı</label>
					<select asp-for="UserId" class="form-control" asp-items="ViewBag.kullanicilar"></select>
				</div>
				<div class="form-group">
					<label>Rol</label>
					<select asp-for="RolId" class="form-control" asp-items="ViewBag.roller"></select>
				</div>
				<div class="form-group">
					<input type="submit" value="Kaydet" class="btn btn-primary" />
				</div>
			</form>
		</div>
	</div>
	<div>
		<input type="submit" value="Toplu Güncelleme" onclick="TopluDegistirmefunc();" class="btn btn-primary" />
	</div>


	<div>
		<a asp-action="Index">Back to List</a>
	</div>

</div>

<script>
	function TopluDegistirmefunc(){
		
		$.ajax({
			url: "/User/TopluGuncelleme/",
			type: 'post',

			success: function (metottanGelenDeger) {
				if (metottanGelenDeger === "ok") {
					//alert("Kullanıcıların rollerini Operatör olarak güncelledik.");
					document.getElementById('exampleModal').style.display = 'block';
					//window.location = "/User/Kullanicilar";
				}				
			},
			error: function (metottanGelenDeger) {

			}

		})
	}
</script>
@section Scripts {
	@{
		await Html.RenderPartialAsync("_ValidationScriptsPartial");
	}
}
